<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é¦™è‚ ä¹±èˆï¼ˆå…¨å¹³å°å…¼å®¹ç‰ˆï¼‰</title>
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: #ffeb3b; overflow: hidden; position: relative; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        #start-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0,0,0,0.85);
            display: flex; justify-content: center; align-items: center;
            z-index: 999; color: white; font-size: 20px; font-weight: bold;
            flex-direction: column; cursor: pointer; text-align: center;
        }
        
        /* åŠ ä¸€ä¸ªæ˜¾çœ¼çš„æŒ‰é’®ï¼Œè¯±å¯¼ç”¨æˆ·å»ç‚¹å®ƒ */
        #play-btn {
            background: #ff5722;
            color: white;
            padding: 15px 40px;
            border-radius: 50px;
            margin-top: 20px;
            font-size: 24px;
            box-shadow: 0 4px 15px rgba(255, 87, 34, 0.4);
            animation: pulse 1.5s infinite;
        }

        .sausage-box { position: absolute; display: flex; justify-content: center; align-items: center; visibility: hidden; will-change: transform; }
        .sausage-box svg { animation-play-state: paused; }
        body.playing .sausage-box svg { animation-play-state: running; }
        
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        
        #big-sausage { width: 320px; height: 320px; z-index: 10; }
        #big-sausage svg { width: 100%; height: 100%; animation: spin 0.8s linear infinite; filter: drop-shadow(15px 15px 25px rgba(0,0,0,0.4)); }
        #small-sausage { width: 160px; height: 160px; z-index: 5; }
        #small-sausage svg { width: 100%; height: 100%; animation: spin 0.5s linear infinite; filter: drop-shadow(8px 8px 15px rgba(0,0,0,0.3)); }
        svg rect { rx: 60; ry: 60; }
        
        .text { position: absolute; bottom: 20px; width: 100%; text-align: center; color: #d32f2f; font-size: 14px; opacity: 0.6; pointer-events: none; }
    </style>
</head>
<body>

    <audio id="bgm" loop preload="auto" playsinline webkit-playsinline>
        <source src="bgm.mp3" type="audio/mpeg">
    </audio>

    <div id="start-overlay">
        <div style="margin-bottom: 20px; font-size: 50px">ğŸŒ­</div>
        <div>å‡†å¤‡å¥½äº†å—ï¼Ÿ</div>
        <div id="play-btn">ç‚¹æˆ‘å¼€å§‹</div>
        <div id="status" style="margin-top:10px; font-size:12px; color:#aaa; font-weight:normal"></div>
    </div>

    <div id="big-sausage" class="sausage-box">
        <svg viewBox="-140 -140 280 280" xmlns="http://www.w3.org/2000/svg"><rect x="-55" y="-130" width="110" height="260" fill="#cd5c5c" /><path d="M -35 -90 Q -25 0 -35 90" stroke="rgba(255,255,255,0.5)" stroke-width="14" fill="none" stroke-linecap="round" /><path d="M -25 -110 Q 0 -120 25 -110" stroke="rgba(255,255,255,0.4)" stroke-width="10" fill="none" stroke-linecap="round" /><path d="M -45 -50 L 5 -60" stroke="#8b0000" stroke-width="6" stroke-linecap="round" /><path d="M -40 30 L 15 20" stroke="#8b0000" stroke-width="6" stroke-linecap="round" /><path d="M -45 110 L 0 100" stroke="#8b0000" stroke-width="6" stroke-linecap="round" /></svg>
    </div>
    <div id="small-sausage" class="sausage-box">
        <svg viewBox="-140 -140 280 280" xmlns="http://www.w3.org/2000/svg"><rect x="-55" y="-130" width="110" height="260" fill="#cd5c5c" /><path d="M -35 -90 Q -25 0 -35 90" stroke="rgba(255,255,255,0.5)" stroke-width="14" fill="none" stroke-linecap="round" /><path d="M -25 -110 Q 0 -120 25 -110" stroke="rgba(255,255,255,0.4)" stroke-width="10" fill="none" stroke-linecap="round" /><path d="M -45 -50 L 5 -60" stroke="#8b0000" stroke-width="6" stroke-linecap="round" /><path d="M -40 30 L 15 20" stroke="#8b0000" stroke-width="6" stroke-linecap="round" /><path d="M -45 110 L 0 100" stroke="#8b0000" stroke-width="6" stroke-linecap="round" /></svg>
    </div>

    <div class="text">âš ï¸ å…¨å¹³å°å…¼å®¹ä¿®å¤ç‰ˆ âš ï¸</div>

    <script>
        // 1. åŠ¨ç”»é€»è¾‘
        const w = window.innerWidth, h = window.innerHeight;
        const items = [
            { el: document.getElementById('big-sausage'), x: w/2-160, y: h/2-160, vx: 4, vy: 4, w: 320, h: 320 },
            { el: document.getElementById('small-sausage'), x: w/2-80, y: h/2-80, vx: -7, vy: 8, w: 160, h: 160 }
        ];
        items.forEach(i => { i.el.style.transform = `translate(${i.x}px, ${i.y}px)`; i.el.style.visibility = 'visible'; });
        
        let isPlaying = false;
        function animate() {
            if(isPlaying) {
                const cw = window.innerWidth, ch = window.innerHeight;
                items.forEach(i => {
                    i.x += i.vx; i.y += i.vy;
                    if(i.x<=0 || i.x+i.w>=cw) i.vx *= -1;
                    if(i.y<=0 || i.y+i.h>=ch) i.vy *= -1;
                    i.el.style.transform = `translate(${i.x}px, ${i.y}px)`;
                });
            }
            requestAnimationFrame(animate);
        }
        animate();

        // 2. éŸ³ä¹æ ¸å¿ƒä¿®å¤é€»è¾‘
        const bgm = document.getElementById('bgm');
        const overlay = document.getElementById('start-overlay');
        const status = document.getElementById('status');

        // åœ¨ç”¨æˆ·äº¤äº’æ—¶ï¼Œå¿…é¡»åŒæ­¥è§¦å‘ play
        function unlockAudio() {
            if(isPlaying) return;

            status.textContent = "æ­£åœ¨åŠ è½½...";
            
            // å…³é”®ï¼šå¼ºåˆ¶è®¾ç½®éŸ³é‡å’Œæ—¶é—´ï¼Œæ¿€æ´»éŸ³é¢‘ä¸Šä¸‹æ–‡
            bgm.volume = 1.0;
            bgm.currentTime = 0;
            
            // å°è¯•æ’­æ”¾
            var playPromise = bgm.play();

            if (playPromise !== undefined) {
                playPromise.then(_ => {
                    // æ’­æ”¾æˆåŠŸäº†ï¼
                    // è¿™æ—¶å€™å†è®¾ç½®å€é€Ÿï¼Œæ¯”è¾ƒç¨³
                    bgm.playbackRate = 1.5; 
                    
                    overlay.style.display = 'none';
                    document.body.classList.add('playing');
                    isPlaying = true;
                })
                .catch(error => {
                    console.log("Play failed:", error);
                    status.textContent = "æ’­æ”¾å¤±è´¥ï¼Œè¯·æ£€æŸ¥éŸ³é‡æˆ–é™éŸ³é”®";
                    status.style.color = "yellow";
                    
                    // å³ä½¿æ²¡å£°éŸ³ï¼Œä¹Ÿå¼ºåˆ¶è®©åŠ¨ç”»å¼€å§‹ï¼Œä¸è‡³äºå¡æ­»
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        document.body.classList.add('playing');
                        isPlaying = true;
                    }, 1000);
                });
            }
        }

        // åªä½¿ç”¨ clickï¼Œè¿™åœ¨ç°ä»£ç§»åŠ¨æµè§ˆå™¨ä¸Šæœ€ç¨³
        overlay.addEventListener('click', unlockAudio);

    </script>
</body>
</html>
