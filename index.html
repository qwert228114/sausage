<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å·¨å‹åŒè‚ ä¹±èˆï¼ˆæœ€ç»ˆä¿®å¤ç‰ˆï¼‰</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #ffeb3b;
            overflow: hidden;
            position: relative;
            user-select: none;
            -webkit-tap-highlight-color: transparent; /* å»é™¤æ‰‹æœºç‚¹å‡»é«˜äº® */
        }

        #start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.85);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999;
            color: white;
            font-size: 22px;
            font-weight: bold;
            flex-direction: column;
            cursor: pointer;
            text-align: center;
            line-height: 1.5;
        }
        #start-overlay span {
            font-size: 50px;
            margin-bottom: 20px;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .sausage-box {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            will-change: transform;
            visibility: hidden; 
        }

        /* åŠ¨ç”»æ§åˆ¶ï¼šé»˜è®¤æš‚åœ */
        .sausage-box svg {
            animation-play-state: paused; 
        }
        /* æ¿€æ´»åå¼€å§‹æ—‹è½¬ */
        body.playing .sausage-box svg {
            animation-play-state: running;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        #big-sausage { width: 320px; height: 320px; z-index: 10; }
        #big-sausage svg {
            width: 100%; height: 100%;
            animation: spin 0.8s linear infinite;
            filter: drop-shadow(15px 15px 25px rgba(0,0,0,0.4));
        }

        #small-sausage { width: 160px; height: 160px; z-index: 5; }
        #small-sausage svg {
            width: 100%; height: 100%;
            animation: spin 0.5s linear infinite;
            filter: drop-shadow(8px 8px 15px rgba(0,0,0,0.3));
        }
        
        svg rect { rx: 60; ry: 60; }

        .text {
            position: absolute; bottom: 20px; width: 100%;
            text-align: center; color: #d32f2f;
            font-size: 14px; font-weight: bold;
            pointer-events: none; opacity: 0.6;
        }
    </style>
</head>
<body>

    <audio id="bgm" loop src="bgm.mp3" preload="auto"></audio>

    <div id="start-overlay">
        <span>ğŸ‘†</span>
        <div>ç‚¹å‡»å±å¹•å¼€å§‹<br><span style="font-size:14px; opacity:0.7; font-weight:normal">(å¦‚æœä¸å“å°±æ˜¯æ²¡åŠ è½½åˆ°éŸ³ä¹)</span></div>
    </div>

    <div id="big-sausage" class="sausage-box">
        <svg viewBox="-140 -140 280 280" xmlns="http://www.w3.org/2000/svg">
            <rect x="-55" y="-130" width="110" height="260" fill="#cd5c5c" />
            <path d="M -35 -90 Q -25 0 -35 90" stroke="rgba(255,255,255,0.5)" stroke-width="14" fill="none" stroke-linecap="round" />
            <path d="M -25 -110 Q 0 -120 25 -110" stroke="rgba(255,255,255,0.4)" stroke-width="10" fill="none" stroke-linecap="round" />
            <path d="M -45 -50 L 5 -60" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -40 30 L 15 20" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -45 110 L 0 100" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
        </svg>
    </div>

    <div id="small-sausage" class="sausage-box">
        <svg viewBox="-140 -140 280 280" xmlns="http://www.w3.org/2000/svg">
            <rect x="-55" y="-130" width="110" height="260" fill="#cd5c5c" />
            <path d="M -35 -90 Q -25 0 -35 90" stroke="rgba(255,255,255,0.5)" stroke-width="14" fill="none" stroke-linecap="round" />
            <path d="M -25 -110 Q 0 -120 25 -110" stroke="rgba(255,255,255,0.4)" stroke-width="10" fill="none" stroke-linecap="round" />
            <path d="M -45 -50 L 5 -60" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -40 30 L 15 20" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -45 110 L 0 100" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
        </svg>
    </div>

    <div class="text">âš ï¸ å·¨ç‰©æ¥è¢­ âš ï¸</div>

    <script>
        const w = window.innerWidth;
        const h = window.innerHeight;
        const bigSize = 320;
        const smallSize = 160;

        const items = [
            { 
                el: document.getElementById('big-sausage'), 
                x: Math.random() * (w - bigSize), 
                y: Math.random() * (h - bigSize), 
                vx: 4, vy: 4, width: bigSize, height: bigSize 
            },
            { 
                el: document.getElementById('small-sausage'), 
                x: Math.random() * (w - smallSize), 
                y: Math.random() * (h - smallSize), 
                vx: -7, vy: 8, width: smallSize, height: smallSize 
            }
        ];

        // åˆå§‹åŒ–æ˜¾ç¤º
        items.forEach(item => {
             item.el.style.transform = `translate(${item.x}px, ${item.y}px)`;
             item.el.style.visibility = 'visible';
        });

        let isPlaying = false; 

        function animate() {
            if (!isPlaying) {
                requestAnimationFrame(animate); 
                return;
            }
            const currentW = window.innerWidth;
            const currentH = window.innerHeight;
            items.forEach(item => {
                item.x += item.vx;
                item.y += item.vy;
                if (item.x <= 0 || item.x + item.width >= currentW) item.vx = -item.vx;
                if (item.y <= 0 || item.y + item.height >= currentH) item.vy = -item.vy;
                item.el.style.transform = `translate(${item.x}px, ${item.y}px)`;
            });
            requestAnimationFrame(animate);
        }

        // --- ä¿®å¤æ ¸å¿ƒï¼šæ›´å¼ºå£®çš„å¯åŠ¨é€»è¾‘ ---
        const overlay = document.getElementById('start-overlay');
        const bgm = document.getElementById('bgm');
        bgm.playbackRate = 1.5;

        // å®šä¹‰å¯åŠ¨å‡½æ•°
        function startAction() {
            if (isPlaying) return; // é˜²æ­¢é‡å¤è§¦å‘

            // 1. æ— è®ºéŸ³ä¹æ˜¯å¦æˆåŠŸï¼Œå…ˆè®©åŠ¨ç”»è·‘èµ·æ¥ï¼(è¿™æ˜¯æœ€é‡è¦çš„ä¿®æ”¹)
            overlay.style.display = 'none';
            document.body.classList.add('playing');
            isPlaying = true;

            // 2. å°è¯•æ’­æ”¾éŸ³ä¹ï¼Œå¦‚æœå¤±è´¥ï¼ˆæ¯”å¦‚æ–‡ä»¶æ‰¾ä¸åˆ°ï¼‰ï¼Œåœ¨æ§åˆ¶å°æŠ¥é”™ä½†ä¸å½±å“åŠ¨ç”»
            bgm.play().catch(function(error) {
                console.log("éŸ³ä¹æ’­æ”¾å¤±è´¥ (å¯èƒ½æ˜¯æ–‡ä»¶åä¸å¯¹):", error);
            });
        }

        // åŒæ—¶ç›‘å¬ ç‚¹å‡» å’Œ è§¦æ‘¸ï¼Œä¿è¯æ‰‹æœºå“åº”çµæ•
        overlay.addEventListener('click', startAction);
        overlay.addEventListener('touchstart', function(e) {
            e.preventDefault(); // é˜²æ­¢è§¦å‘ç‚¹å‡»å»¶è¿Ÿ
            startAction();
        }, {passive: false});

        animate();
    </script>
</body>
</html>
