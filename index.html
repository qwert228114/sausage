<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å·¨å‹åŒè‚ ä¹±èˆï¼ˆå¸¦æ„ŸéŸ³ä¹ç‰ˆï¼‰</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #ffeb3b;
            overflow: hidden;
            position: relative;
            /* ç¦æ­¢ç”¨æˆ·é€‰ä¸­æ–‡å­—ï¼Œé˜²æ­¢ç‚¹å‡»æ—¶è¯¯æ“ä½œ */
            user-select: none; 
        }

        /* --- æ–°å¢ï¼šç‚¹å‡»å¼€å§‹çš„è¦†ç›–å±‚ --- */
        #start-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 999; /* ä¿è¯åœ¨æœ€ä¸Šå±‚ */
            color: white;
            font-size: 24px;
            font-weight: bold;
            flex-direction: column;
            cursor: pointer;
        }
        #start-overlay span {
            font-size: 60px;
            margin-bottom: 20px;
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .sausage-box {
            position: absolute;
            display: flex;
            justify-content: center;
            align-items: center;
            will-change: transform;
            visibility: hidden;
        }

        /* æ—‹è½¬åŠ¨ç”»å…ˆå®šä¹‰å¥½ï¼Œä½†é»˜è®¤æ˜¯æš‚åœçš„ (paused) */
        .sausage-box svg {
            animation-play-state: paused; 
        }
        /* å½“ body æœ‰äº† playing ç±»ååï¼ŒåŠ¨ç”»æ‰å¼€å§‹æ’­ */
        body.playing .sausage-box svg {
            animation-play-state: running;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        #big-sausage {
            width: 320px;
            height: 320px;
            z-index: 10;
        }
        #big-sausage svg {
            width: 100%;
            height: 100%;
            animation: spin 0.8s linear infinite;
            filter: drop-shadow(15px 15px 25px rgba(0,0,0,0.4));
            animation-play-state: paused; /* åˆå§‹æš‚åœ */
        }

        #small-sausage {
            width: 160px;
            height: 160px;
            z-index: 5;
        }
        #small-sausage svg {
            width: 100%;
            height: 100%;
            animation: spin 0.5s linear infinite;
            filter: drop-shadow(8px 8px 15px rgba(0,0,0,0.3));
            animation-play-state: paused; /* åˆå§‹æš‚åœ */
        }
        
        svg rect { rx: 60; ry: 60; }

        .text {
            position: absolute;
            bottom: 20px;
            width: 100%;
            text-align: center;
            color: #d32f2f;
            font-size: 16px;
            font-weight: bold;
            pointer-events: none;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <audio id="bgm" loop src="bgm.mp3" preload="auto"></audio>

    <div id="start-overlay">
        <span>ğŸ‘†</span>
        ç‚¹å‡»å±å¹•<br>å¼€å§‹æ¿€æƒ…ä¹±èˆ
    </div>

    <div id="big-sausage" class="sausage-box">
        <svg viewBox="-140 -140 280 280" xmlns="http://www.w3.org/2000/svg">
            <rect x="-55" y="-130" width="110" height="260" fill="#cd5c5c" />
            <path d="M -35 -90 Q -25 0 -35 90" stroke="rgba(255,255,255,0.5)" stroke-width="14" fill="none" stroke-linecap="round" />
            <path d="M -25 -110 Q 0 -120 25 -110" stroke="rgba(255,255,255,0.4)" stroke-width="10" fill="none" stroke-linecap="round" />
            <path d="M -45 -50 L 5 -60" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -40 30 L 15 20" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -45 110 L 0 100" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
        </svg>
    </div>

    <div id="small-sausage" class="sausage-box">
        <svg viewBox="-140 -140 280 280" xmlns="http://www.w3.org/2000/svg">
            <rect x="-55" y="-130" width="110" height="260" fill="#cd5c5c" />
            <path d="M -35 -90 Q -25 0 -35 90" stroke="rgba(255,255,255,0.5)" stroke-width="14" fill="none" stroke-linecap="round" />
            <path d="M -25 -110 Q 0 -120 25 -110" stroke="rgba(255,255,255,0.4)" stroke-width="10" fill="none" stroke-linecap="round" />
            <path d="M -45 -50 L 5 -60" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -40 30 L 15 20" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
            <path d="M -45 110 L 0 100" stroke="#8b0000" stroke-width="6" stroke-linecap="round" />
        </svg>
    </div>

    <div class="text">âš ï¸ å·¨ç‰©æ¥è¢­ Â· éŸ³é‡é¢„è­¦ âš ï¸</div>

    <script>
        const w = window.innerWidth;
        const h = window.innerHeight;
        const bigSize = 320;
        const smallSize = 160;

        const items = [
            { 
                el: document.getElementById('big-sausage'), 
                x: Math.random() * (w - bigSize), 
                y: Math.random() * (h - bigSize), 
                vx: 4, vy: 4, width: bigSize, height: bigSize 
            },
            { 
                el: document.getElementById('small-sausage'), 
                x: Math.random() * (w - smallSize), 
                y: Math.random() * (h - smallSize), 
                vx: -7, vy: 8, width: smallSize, height: smallSize 
            }
        ];

        items.forEach(item => {
             item.el.style.transform = `translate(${item.x}px, ${item.y}px)`;
             item.el.style.visibility = 'visible';
        });

        let isPlaying = false; // è®°å½•æ˜¯å¦å¼€å§‹æ’­æ”¾

        function animate() {
            if (!isPlaying) {
                requestAnimationFrame(animate); // æ²¡ç‚¹å¼€å§‹å‰ï¼Œè™½ç„¶åœ¨å¾ªç¯ä½†ä¸æ›´æ–°ä½ç½®
                return;
            }
            const currentW = window.innerWidth;
            const currentH = window.innerHeight;
            items.forEach(item => {
                item.x += item.vx;
                item.y += item.vy;
                if (item.x <= 0 || item.x + item.width >= currentW) item.vx = -item.vx;
                if (item.y <= 0 || item.y + item.height >= currentH) item.vy = -item.vy;
                item.el.style.transform = `translate(${item.x}px, ${item.y}px)`;
            });
            requestAnimationFrame(animate);
        }

        // --- æ–°å¢ï¼šç‚¹å‡»å¼€å§‹æ’­æ”¾çš„é€»è¾‘ ---
        const overlay = document.getElementById('start-overlay');
        const bgm = document.getElementById('bgm');

        // è®¾ç½®æ’­æ”¾é€Ÿåº¦ä¸º 1.5 å€
        bgm.playbackRate = 1.5;

        // ç›‘å¬ä»»æ„ä½ç½®çš„ç‚¹å‡»äº‹ä»¶ï¼ˆåªç›‘å¬ä¸€æ¬¡ï¼‰
        document.body.addEventListener('click', function startClick() {
            // 1. æ’­æ”¾éŸ³ä¹
            bgm.play().then(() => {
                // æ’­æ”¾æˆåŠŸåï¼š
                // 2. éšè—è¦†ç›–å±‚
                overlay.style.display = 'none';
                // 3. ç»™ body åŠ ä¸€ä¸ªç±»ï¼Œè®© CSS é‡Œçš„æ—‹è½¬åŠ¨ç”»å¼€å§‹
                document.body.classList.add('playing');
                // 4. è®© JS é‡Œçš„ç§»åŠ¨åŠ¨ç”»å¼€å§‹
                isPlaying = true;
            }).catch(err => {
                console.log("æ’­æ”¾å¤±è´¥ï¼Œå¯èƒ½æ˜¯ç”¨æˆ·æ²¡æœ‰äº¤äº’:", err);
                // å¦‚æœæ’­æ”¾å¤±è´¥ï¼Œç‚¹å‡»è¦†ç›–å±‚å†è¯•ä¸€æ¬¡
                overlay.textContent = "æ’­æ”¾å¤±è´¥ï¼Œè¯·å†ç‚¹ä¸€æ¬¡ï¼";
            });

            // ç§»é™¤ç›‘å¬å™¨ï¼Œç¡®ä¿åªè§¦å‘ä¸€æ¬¡
            document.body.removeEventListener('click', startClick);
        }, { once: true }); // {once:true} ä¹Ÿæ˜¯åªè§¦å‘ä¸€æ¬¡çš„æ„æ€ï¼ŒåŒé‡ä¿é™©

        animate();
    </script>
</body>
</html>
